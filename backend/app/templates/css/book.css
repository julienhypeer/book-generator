/* Book Template CSS for Professional Printing
 * Format: 156mm x 234mm (standard book)
 * Optimized for novels, non-fiction, and general books
 */

/* Page Setup */
@page {
    size: 156mm 234mm;
    margin: 20mm 15mm 20mm 15mm;
    bleed: 3mm;
    marks: crop cross;
    
    @bottom-center {
        content: counter(page);
        font-family: Garamond, Georgia, serif;
        font-size: 10pt;
    }
}

/* Different page types */
@page :first {
    @bottom-center {
        content: none; /* No page number on first page */
    }
}

@page :left {
    margin-left: 20mm; /* Extra margin for binding */
    
    @top-left {
        content: string(book-title);
        font-family: Garamond, Georgia, serif;
        font-size: 9pt;
        font-style: italic;
    }
}

@page :right {
    margin-right: 20mm;
    
    @top-right {
        content: string(chapter-title);
        font-family: Garamond, Georgia, serif;
        font-size: 9pt;
        font-style: italic;
    }
}

@page chapter {
    @top-left { content: none; }
    @top-right { content: none; }
}

@page frontmatter {
    @bottom-center {
        content: counter(page, lower-roman);
    }
}

/* Typography */
body {
    font-family: Garamond, Georgia, serif;
    font-size: 11pt;
    line-height: 1.6;
    text-align: justify;
    color: black;
    hyphens: auto;
    hyphenate-language: "fr";
    hyphenate-limit-chars: 5 3 2;
}

/* Paragraphs */
p {
    margin: 0 0 0.5em 0;
    text-indent: 1.2em;
    orphans: 3;
    widows: 3;
}

/* First paragraph after heading or scene break */
p.first,
h1 + p,
h2 + p,
h3 + p,
.scene-break + p {
    text-indent: 0;
}

/* Headings */
h1, h2, h3, h4, h5, h6 {
    font-family: Garamond, Georgia, serif;
    page-break-after: avoid;
    page-break-inside: avoid;
    orphans: 3;
    widows: 3;
    margin: 0;
    font-weight: normal;
}

h1 {
    font-size: 24pt;
    text-align: center;
    margin: 3em 0 2em 0;
    page-break-before: right;
    page: chapter;
    string-set: chapter-title content();
}

h1::before {
    content: "Chapitre " counter(chapter) " ";
    display: block;
    font-size: 14pt;
    margin-bottom: 1em;
    counter-increment: chapter;
}

h2 {
    font-size: 18pt;
    margin: 2em 0 1em 0;
    text-align: left;
    counter-increment: section;
}

h3 {
    font-size: 14pt;
    margin: 1.5em 0 0.75em 0;
    font-style: italic;
    counter-increment: subsection;
}

/* Lists */
ul, ol {
    margin: 1em 0 1em 2em;
    padding: 0;
}

li {
    margin: 0.25em 0;
    orphans: 2;
    widows: 2;
}

/* Blockquotes */
blockquote {
    margin: 1em 2em;
    font-style: italic;
    page-break-inside: avoid;
}

blockquote p {
    text-indent: 0;
}

/* Images and Figures */
img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 1em auto;
}

figure {
    margin: 1.5em 0;
    text-align: center;
    page-break-inside: avoid;
}

figcaption {
    font-size: 9pt;
    font-style: italic;
    margin-top: 0.5em;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 1em 0;
    page-break-inside: avoid;
    font-size: 10pt;
}

th, td {
    padding: 0.5em;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

th {
    font-weight: bold;
    border-bottom: 2px solid #000;
}

/* Table of Contents */
.toc {
    page-break-after: always;
}

.toc h1 {
    page-break-before: auto;
}

.toc ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.toc li {
    margin: 0.5em 0;
    position: relative;
}

.toc a {
    text-decoration: none;
    color: black;
}

.toc a::after {
    content: leader(dotted) " " target-counter(attr(href), page);
    font-size: 10pt;
}

.toc li.level-1 {
    font-weight: bold;
    margin-top: 1em;
}

.toc li.level-2 {
    margin-left: 2em;
    font-weight: normal;
}

.toc li.level-3 {
    margin-left: 4em;
    font-size: 10pt;
}

/* Footnotes */
.footnote {
    font-size: 9pt;
    margin-top: 2em;
    padding-top: 0.5em;
    border-top: 1px solid #ccc;
}

.footnote-ref {
    font-size: 0.8em;
    vertical-align: super;
}

/* Special Elements */
.dedication {
    page-break-before: right;
    text-align: center;
    font-style: italic;
    margin: 30% auto;
}

.copyright {
    page-break-before: always;
    font-size: 9pt;
    text-align: left;
}

.title-page {
    page-break-before: right;
    text-align: center;
    page: blank;
}

.title-page h1 {
    font-size: 36pt;
    margin: 30% 0 2em 0;
    page-break-before: auto;
}

.title-page .author {
    font-size: 18pt;
    margin: 2em 0;
}

.title-page .publisher {
    position: absolute;
    bottom: 2em;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 12pt;
}

/* Parts and Sections */
.part {
    page-break-before: right;
    text-align: center;
    margin: 30% 0;
    page: blank;
}

.part h1 {
    font-size: 30pt;
    page-break-before: auto;
}

.part h1::before {
    content: "Partie " counter(part, upper-roman);
    display: block;
    font-size: 18pt;
    margin-bottom: 1em;
    counter-increment: part;
}

/* Scene Breaks */
.scene-break {
    text-align: center;
    margin: 2em 0;
    page-break-inside: avoid;
}

.scene-break::before {
    content: "⁂";
    font-size: 18pt;
}

/* Drop Caps for chapter beginnings */
.chapter > p:first-of-type::first-letter {
    font-size: 4em;
    line-height: 0.8;
    float: left;
    margin: 0 0.05em -0.1em 0;
    font-weight: bold;
}

/* Code blocks (for technical books) */
pre {
    font-family: 'Courier New', Courier, monospace;
    font-size: 9pt;
    background: #f5f5f5;
    padding: 1em;
    margin: 1em 0;
    overflow-x: auto;
    page-break-inside: avoid;
}

code {
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.9em;
    background: #f5f5f5;
    padding: 0.2em 0.4em;
}

/* French Typography Rules */
:lang(fr) {
    quotes: "«\00A0" "\00A0»" "‹\00A0" "\00A0›";
}

/* Prevent orphan/widow lines */
* {
    orphans: 3;
    widows: 3;
}

/* Counters */
body {
    counter-reset: chapter part section subsection;
}

.frontmatter {
    counter-reset: page;
}

.mainmatter {
    counter-reset: page 1;
}

/* End of book.css */