/* Novel Template CSS for Fiction Books
 * Format: 5.5in x 8.5in (US Trade Paperback)
 * Optimized for fiction, stories, and creative writing
 */

/* Page Setup */
@page {
    size: 5.5in 8.5in;
    margin: 0.75in 0.75in 0.75in 0.75in;
    bleed: 0.125in;
    
    @bottom-center {
        content: counter(page);
        font-family: 'Baskerville', 'Georgia', serif;
        font-size: 10pt;
        margin-bottom: 0.25in;
    }
}

/* Different page types */
@page :first {
    @bottom-center {
        content: none;
    }
}

@page :blank {
    @top-left { content: none; }
    @top-right { content: none; }
    @bottom-center { content: none; }
}

@page :left {
    margin-left: 0.875in; /* Extra margin for binding */
    
    @top-left {
        content: string(author-name);
        font-family: 'Baskerville', 'Georgia', serif;
        font-size: 9pt;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
}

@page :right {
    margin-right: 0.875in;
    
    @top-right {
        content: string(book-title);
        font-family: 'Baskerville', 'Georgia', serif;
        font-size: 9pt;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }
}

@page chapter-start {
    @top-left { content: none; }
    @top-right { content: none; }
    @bottom-center {
        content: none; /* No page number on chapter start */
    }
}

/* Typography */
body {
    font-family: 'Baskerville', 'Georgia', serif;
    font-size: 10.5pt;
    line-height: 1.5;
    text-align: justify;
    color: #1a1a1a;
    hyphens: auto;
    hyphenate-limit-chars: 6 3 2;
}

/* Paragraphs */
p {
    margin: 0;
    text-indent: 1.5em;
    orphans: 3;
    widows: 3;
}

/* First paragraph - no indent */
p.first,
.chapter > p:first-of-type,
.scene-break + p,
h1 + p,
h2 + p {
    text-indent: 0;
}

/* Drop cap for chapter opening */
.chapter > p:first-of-type::first-letter {
    font-size: 5em;
    line-height: 0.85;
    float: left;
    margin: -0.05em 0.05em -0.15em -0.02em;
    font-family: 'Baskerville', 'Georgia', serif;
    font-weight: normal;
}

/* Chapters */
.chapter {
    page-break-before: right;
    page: chapter-start;
}

h1 {
    font-size: 18pt;
    text-align: center;
    margin: 2in 0 1in 0;
    font-weight: normal;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    page-break-after: avoid;
    string-set: book-title content();
}

h1.numbered::before {
    content: "Chapter " counter(chapter);
    display: block;
    font-size: 12pt;
    margin-bottom: 0.5em;
    counter-increment: chapter;
}

/* Scene Breaks */
.scene-break {
    text-align: center;
    margin: 1.5em 0;
    page-break-inside: avoid;
    page-break-after: avoid;
}

.scene-break::before {
    content: "* * *";
    font-size: 12pt;
    letter-spacing: 0.5em;
}

/* Alternative scene break styles */
.scene-break.ornament::before {
    content: "❦";
    font-size: 18pt;
    letter-spacing: normal;
}

.scene-break.dots::before {
    content: "• • •";
    letter-spacing: 0.5em;
}

/* Dialogue */
.dialogue {
    margin: 0.5em 0;
}

/* Epigraphs */
.epigraph {
    margin: 2em 2em 3em 2em;
    font-style: italic;
    font-size: 10pt;
    text-align: right;
    page-break-inside: avoid;
}

.epigraph p {
    text-indent: 0;
    margin: 0.5em 0;
}

.epigraph .attribution {
    margin-top: 0.5em;
    font-size: 9pt;
    font-style: normal;
}

.epigraph .attribution::before {
    content: "— ";
}

/* Parts */
.part {
    page-break-before: right;
    text-align: center;
    margin: 30% 0;
    page: chapter-start;
}

.part h1 {
    font-size: 24pt;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.2em;
}

.part h1::before {
    content: "Part " counter(part, upper-roman);
    display: block;
    font-size: 14pt;
    margin-bottom: 1em;
    counter-increment: part;
}

.part .subtitle {
    font-size: 16pt;
    font-style: italic;
    margin-top: 1em;
    text-transform: none;
    letter-spacing: normal;
}

/* Front Matter */
.title-page {
    page-break-before: right;
    page-break-after: always;
    text-align: center;
    page: chapter-start;
}

.title-page h1 {
    font-size: 30pt;
    margin: 25% 0 0.5em 0;
    text-transform: uppercase;
    letter-spacing: 0.15em;
}

.title-page .subtitle {
    font-size: 18pt;
    font-style: italic;
    margin: 0 0 2em 0;
}

.title-page .author {
    font-size: 16pt;
    margin: 2em 0;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    string-set: author-name content();
}

.title-page .publisher {
    position: absolute;
    bottom: 1in;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 11pt;
}

/* Copyright Page */
.copyright {
    page-break-before: always;
    page-break-after: always;
    font-size: 8pt;
    line-height: 1.3;
    text-align: left;
}

.copyright p {
    text-indent: 0;
    margin: 0.5em 0;
}

/* Dedication */
.dedication {
    page-break-before: right;
    page-break-after: always;
    text-align: center;
    font-style: italic;
    margin: 40% auto;
    page: chapter-start;
}

.dedication p {
    text-indent: 0;
}

/* Acknowledgments */
.acknowledgments {
    page-break-before: right;
}

.acknowledgments h1 {
    margin: 1in 0 0.5in 0;
}

/* Back Matter */
.about-author {
    page-break-before: right;
}

.about-author h1 {
    margin: 1in 0 0.5in 0;
}

/* Lists (rare in novels but included) */
ul, ol {
    margin: 1em 0 1em 2em;
    padding: 0;
}

li {
    margin: 0.25em 0;
    text-indent: 0;
}

/* Blockquotes (for letters, notes, etc.) */
blockquote {
    margin: 1em 2em;
    font-style: italic;
    page-break-inside: avoid;
}

blockquote p {
    text-indent: 1em;
}

blockquote p:first-child {
    text-indent: 0;
}

/* Letters or Documents */
.letter {
    margin: 1em 2em;
    font-family: 'Courier New', Courier, monospace;
    font-size: 10pt;
    line-height: 1.4;
    page-break-inside: avoid;
}

.letter p {
    text-indent: 0;
    margin: 0.5em 0;
}

.letter .date {
    text-align: right;
    margin-bottom: 1em;
}

.letter .signature {
    text-align: right;
    margin-top: 1em;
    font-style: italic;
}

/* Emphasis Styles */
em {
    font-style: italic;
}

strong {
    font-weight: bold;
    font-style: normal;
}

.thought {
    font-style: italic;
}

.shout {
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.whisper {
    font-size: 0.9em;
    font-style: italic;
}

/* Special Typography */
.small-caps {
    font-variant: small-caps;
    letter-spacing: 0.05em;
}

.ornamental-break {
    text-align: center;
    margin: 2em 0;
    font-size: 24pt;
}

/* Counters */
body {
    counter-reset: chapter part;
}

/* Widows and Orphans Control */
p, blockquote, .dialogue {
    orphans: 3;
    widows: 3;
}

h1, h2, h3, .scene-break {
    orphans: 4;
    widows: 4;
    page-break-after: avoid;
}

/* Prevent scene breaks at bottom of page */
.scene-break {
    page-break-inside: avoid;
    page-break-after: avoid;
}

/* Ensure chapter starts on right page */
.chapter:nth-of-type(even) {
    page-break-before: right;
}

/* End of novel.css */